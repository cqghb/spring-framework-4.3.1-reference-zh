# bean 的概述

一个spring容器管理了一个或者多个bean。这些bean是开发者通过配置容器的元数据来创建，例如，在一个XML文件中定义一个<bean/>标签。

对于容器本身，这些bean通过BeanDefinition被定义，包含以下的一些元数据：

* 包限定类名：通常表示的是bean的实现类。
* bean行为配置元数：他说明了bean在容器是怎样的情况(范围、生命周期、回调函数等等)。
* 一个bean在工作的时候可能需要引入其他的bean；这些引用也被称为依赖项或合作者。
* 在新创建的对象中设置其它的配置选项，例如，在管理连接池是，设置链接数量和池子的大小限制。

这些元数据转化成了构成bean的一组属性。

表格7.1 bean的定义

|属性                     |解释                              |
|:------------------------|:---------------------------------|
|class                    |指明了bean的实现类既是bean的实例化|
|name                     |定义bean的名称                    |
|scope                    |请参看7.5章节中的bean scopes      |
|constructor arguments    |bean的依赖项                      |
|properties               |bean的依赖项                      |
|autowiring mode          |自动装配模式                      |
|lazy-initialization mode |懒加载模式                        |
|initialization method    |初始化方法                        |
|destruction method       |销毁方法                          |

除了在定义bean默认的信息之外，对于创建一个特定的bean，ApplicationContext实现了注册已经存在的bean。用户在容器外创建的对象。通过访问ApplicationContext的BeanFactory调用getBeanFactory方法来返回一个默认的BeanFactory实现，DefaultListableBeanFactory支持通过registerSingleton(...)和registerBeanDefinition(...)，然而大多数应用程 序是通过配置元数据来定义bean，从而是bean进行工作。

### 注意

bean元数据和手动提供的单例实例需要尽早注册，为了容器正确的对实例进行自动装配等步骤的正常进行。目前在一定程度上支持重写现有的元数据和实现的单例实例，但是在运行时注册新的bean并没有正式支持，这可能会导致bean容器中的并发访问异常或者状态不一致。

# Naming beans

每一个bean每一个bean都有一个或多个标志符，这些标识符在bean容器中都是唯一的，一个bean都只有一个标识符即ID，但是如果需要多个，其他的可以视为别名。

在基于XML的配置文件中，给bean指定的ID或者name都是bean的标志符，ID属性可以精确的 指定一个bean，通常致谢ID以字母命名，但是也有可能包含特殊字符，如果要给bean引入其他别名，也可以给bean指定name属性，如果要指定多个名称，需用逗号、顿号、或者空格分隔开来。在spring3.1中，ID被定义成了xsd:string类型，bean的ID属性由容器强制执行， 不又XML解析器执行。

你可能并不需要为bean提供ID和name属性，如果没有显式的给bean提供name或ID，容器将为该bean生成唯一的名称。然而，如果想通过名称来引用该bean，通常需要使用ref元素或者Service Locator方式来引用bean，但是必须为bean指定一个name属性值，使用内部bean或者依赖注入就不必须提供name属性值。

## bean name属性的命名约定

在给bean命名是使用的标准的Java公约，以小写字母开头，后面每个单词的首字母大写。比如：accountManager、accountService、userDao、loginController等等都是合法的。

在开发过程中使用spring AOP是，给bean命名是使用易于阅读和理解的名称，开发过程中非常有帮助。

### 注意

组件在扫描类路径是，spring会给未定义的名称的bean自动生成一个名字。一般规则是。用简单的类的名称并首字母小写。然而在特殊情况下，当有一个以上的字符，第一个和第二个字符都会被大写，来保护原始的名称不重名。这些规则可以参考java.beans.Introspector.decapitalize。

# 给bean指定别名

bean在定义时，可以使用ID属性指定一个名称，使用name指定时可以用多个名称，都可以指向bean的引用，这些名称可以是相同的bean的别名，在某些情况下，允许应用程序中每个主键使用特定于该组件本身的bean名称来引用一个公共依赖是有用的。

bean的别名再多有时候可能还是不够使用，然而，有时候需要为别处定义的bean引入别名，在大型系统中通常在每个子系统中分开定义自己的对象，在基于XML的配置元数据中，可以 使用 <alias/>标签来完成此操作。

    <alias name="fromName" alias="toName"/>

在这种情况下，bean在同一个容器中被引用，如果指定了别名，可以通过别名来指向到那个bean。

例如
